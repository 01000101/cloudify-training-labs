tosca_definitions_version: cloudify_dsl_1_3


plugins:
  pkg:
    executor: central_deployment_agent
    package_name: cloudify-aws-api-gateway-plugin
    package_version: '0.1'
    source: lab


data_types:
  cloudify.datatypes.aws.Config:
    properties:
      aws_access_key_id:
        description: >
          The ID of your AWS ACCESS KEY.
        type: string
        required: false
      aws_secret_access_key:
        description: >
          The ID of your AWS SECRET KEY.
        type: string
        required: false
      ec2_region_name:
        description: >
          The EC2 Region RegionName, such as us-east-1.
          (Not us-east-1b, which is an availability zone, or US East, which is a Region.)
        type: string
        required: false
      api_gateway_region_name:
        description: >
          The API Gateway Region RegionName, such as us-east-1. Defaults to the value
          given to ec2_region_name
        type: string
        required: false


dsl_definitions:
  BASE_config: &BASE_config
    use_external_resource:
      description: >
        Indicate whether the resource exists or if Cloudify should create the resource,
        true if you are bringing an existing resource, false if you want cloudify to create it.
      type: boolean
      default: false
      required: true
    resource_id:
      description: >
        The AWS resource ID of the external resource, if use_external_resource is true.
        Otherwise it is an empty string.
      type: string
      default: ''
    aws_config:
        description: >
          A dictionary of values to pass to authenticate with the AWS API.
        type: cloudify.datatypes.aws.Config
        required: false
  
  RESTAPI_properties: &RESTAPI_properties
    <<: *BASE_config
    name:
      description: >
        User-defined name of the REST API
      required: true
    description:
      description: >
        User-defined description of the REST API
      required: false
    version:
      description: >
        User-defined version of the REST API
      required: false


node_types:
  cloudify.nodes.aws.apigateway.RESTAPI:
    derived_from: cloudify.nodes.Root
    properties:
      <<: *RESTAPI_properties
    interfaces:
      cloudify.interfaces.lifecycle:
        create: pkg.api_gateway.resources.rest_api.create
        delete: pkg.api_gateway.resources.rest_api.delete

